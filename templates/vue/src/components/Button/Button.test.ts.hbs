import { describe, it, expect } from 'vitest';
import { mount } from '@vue/test-utils';
import Button from './Button.vue';

describe('Button', () => {
it('renders slot content', () => {
const wrapper = mount(Button, {
slots: {
default: 'Click me',
},
});
expect(wrapper.text()).toContain('Click me');
});

it('emits click event when clicked', async () => {
const wrapper = mount(Button, {
slots: {
default: 'Click me',
},
});

await wrapper.trigger('click');
expect(wrapper.emitted('click')).toBeTruthy();
expect(wrapper.emitted('click')?.length).toBe(1);
});

it('does not emit click when disabled', async () => {
const wrapper = mount(Button, {
props: { disabled: true },
slots: { default: 'Click me' },
});

await wrapper.trigger('click');
expect(wrapper.emitted('click')).toBeFalsy();
});

it('does not emit click when loading', async () => {
const wrapper = mount(Button, {
props: { loading: true },
slots: { default: 'Click me' },
});

await wrapper.trigger('click');
expect(wrapper.emitted('click')).toBeFalsy();
});

it('applies variant class', () => {
const wrapper = mount(Button, {
props: { variant: 'secondary' },
slots: { default: 'Click me' },
});

expect(wrapper.classes()).toContain('button--secondary');
});

it('applies size class', () => {
const wrapper = mount(Button, {
props: { size: 'large' },
slots: { default: 'Click me' },
});

expect(wrapper.classes()).toContain('button--large');
});

it('shows loader when loading', () => {
const wrapper = mount(Button, {
props: { loading: true },
slots: { default: 'Click me' },
});

expect(wrapper.find('.button__loader').exists()).toBe(true);
});
});