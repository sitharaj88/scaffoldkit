import { describe, it, expect } from 'vitest';
import {
capitalize,
camelCase,
kebabCase,
snakeCase,
truncate,
isBlank,
randomString,
} from './string';

describe('String Utils', () => {
describe('capitalize', () => {
it('capitalizes the first letter', () => {
expect(capitalize('hello')).toBe('Hello');
});

it('handles empty string', () => {
expect(capitalize('')).toBe('');
});

it('handles single character', () => {
expect(capitalize('h')).toBe('H');
});
});

describe('camelCase', () => {
it('converts kebab-case', () => {
expect(camelCase('hello-world')).toBe('helloWorld');
});

it('converts snake_case', () => {
expect(camelCase('hello_world')).toBe('helloWorld');
});

it('converts space separated', () => {
expect(camelCase('hello world')).toBe('helloWorld');
});
});

describe('kebabCase', () => {
it('converts camelCase', () => {
expect(kebabCase('helloWorld')).toBe('hello-world');
});

it('converts PascalCase', () => {
expect(kebabCase('HelloWorld')).toBe('hello-world');
});
});

describe('snakeCase', () => {
it('converts camelCase', () => {
expect(snakeCase('helloWorld')).toBe('hello_world');
});

it('converts kebab-case', () => {
expect(snakeCase('hello-world')).toBe('hello_world');
});
});

describe('truncate', () => {
it('truncates long strings', () => {
expect(truncate('Hello, World!', 8)).toBe('Hello...');
});

it('does not truncate short strings', () => {
expect(truncate('Hello', 10)).toBe('Hello');
});

it('uses custom suffix', () => {
expect(truncate('Hello, World!', 9, '…')).toBe('Hello, W…');
});
});

describe('isBlank', () => {
it('returns true for empty string', () => {
expect(isBlank('')).toBe(true);
});

it('returns true for whitespace only', () => {
expect(isBlank(' ')).toBe(true);
});

it('returns true for null', () => {
expect(isBlank(null)).toBe(true);
});

it('returns true for undefined', () => {
expect(isBlank(undefined)).toBe(true);
});

it('returns false for non-empty string', () => {
expect(isBlank('hello')).toBe(false);
});
});

describe('randomString', () => {
it('generates string of correct length', () => {
expect(randomString(10)).toHaveLength(10);
});

it('uses custom characters', () => {
const result = randomString(100, 'abc');
expect(result).toMatch(/^[abc]+$/);
});
});
});