/**
* Array utility functions
*/

/**
* Get unique values from an array
* @param arr - Input array
* @returns Array with unique values
*
* @example
* ```ts
* unique([1, 2, 2, 3, 3, 3]); // [1, 2, 3]
* ```
*/
export function unique<T>(arr: T[]): T[] {
    return [...new Set(arr)];
    }

    /**
    * Chunk an array into smaller arrays
    * @param arr - Input array
    * @param size - Chunk size
    * @returns Array of chunks
    *
    * @example
    * ```ts
    * chunk([1, 2, 3, 4, 5], 2); // [[1, 2], [3, 4], [5]]
    * ```
    */
    export function chunk<T>(arr: T[], size: number): T[][] {
        if (size <= 0) throw new Error('Chunk size must be greater than 0'); const chunks: T[][]=[]; for (let i=0; i <
            arr.length; i +=size) { chunks.push(arr.slice(i, i + size)); } return chunks; } /** * Flatten a nested array
            * @param arr - Input array * @param depth - Maximum depth to flatten (default: Infinity) * @returns
            Flattened array * * @example * ```ts * flatten([[1, 2], [3, [4, 5]]]); // [1, 2, 3, 4, 5] * ``` */ export
            function flatten<T>(arr: unknown[], depth = Infinity): T[] {
            return arr.flat(depth) as T[];
            }

            /**
            * Shuffle an array (Fisher-Yates algorithm)
            * @param arr - Input array
            * @returns New shuffled array
            *
            * @example
            * ```ts
            * shuffle([1, 2, 3, 4, 5]); // [3, 1, 5, 2, 4] (random)
            * ```
            */
            export function shuffle<T>(arr: T[]): T[] {
                const result = [...arr];
                for (let i = result.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [result[i], result[j]] = [result[j], result[i]];
                }
                return result;
                }

                /**
                * Get a random element from an array
                * @param arr - Input array
                * @returns Random element or undefined if empty
                *
                * @example
                * ```ts
                * sample([1, 2, 3, 4, 5]); // 3 (random)
                * ```
                */
                export function sample<T>(arr: T[]): T | undefined {
                    if (arr.length === 0) return undefined;
                    return arr[Math.floor(Math.random() * arr.length)];
                    }

                    /**
                    * Compute the difference between two arrays
                    * @param arr1 - First array
                    * @param arr2 - Second array
                    * @returns Elements in arr1 but not in arr2
                    *
                    * @example
                    * ```ts
                    * difference([1, 2, 3], [2, 3, 4]); // [1]
                    * ```
                    */
                    export function difference<T>(arr1: T[], arr2: T[]): T[] {
                        const set2 = new Set(arr2);
                        return arr1.filter((item) => !set2.has(item));
                        }

                        /**
                        * Compute the intersection of two arrays
                        * @param arr1 - First array
                        * @param arr2 - Second array
                        * @returns Elements present in both arrays
                        *
                        * @example
                        * ```ts
                        * intersection([1, 2, 3], [2, 3, 4]); // [2, 3]
                        * ```
                        */
                        export function intersection<T>(arr1: T[], arr2: T[]): T[] {
                            const set2 = new Set(arr2);
                            return arr1.filter((item) => set2.has(item));
                            }

                            /**
                            * Group array elements by a key
                            * @param arr - Input array
                            * @param keyFn - Function to extract key from element
                            * @returns Object with grouped elements
                            *
                            * @example
                            * ```ts
                            * groupBy([{ a: 1 }, { a: 2 }, { a: 1 }], x => x.a);
                            * // { '1': [{ a: 1 }, { a: 1 }], '2': [{ a: 2 }] }
                            * ```
                            */
                            export function groupBy<T, K extends string | number | symbol>(
                                arr: T[],
                                keyFn: (item: T) => K
                                ): Record<K, T[]> {
                                    return arr.reduce(
                                    (acc, item) => {
                                    const key = keyFn(item);
                                    if (!acc[key]) {
                                    acc[key] = [];
                                    }
                                    acc[key].push(item);
                                    return acc;
                                    },
                                    {} as Record<K, T[]>
                                        );
                                        }