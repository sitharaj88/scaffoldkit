import { describe, it, expect } from 'vitest';
import { render, fireEvent } from '@testing-library/svelte';
import Button from './Button.svelte';

describe('Button', () => {
it('renders with text', () => {
const { getByRole } = render(Button, { props: {} });
expect(getByRole('button')).toBeDefined();
});

it('calls onclick when clicked', async () => {
let clicked = false;
const { getByRole } = render(Button, {
props: {
onclick: () => { clicked = true; },
},
});

await fireEvent.click(getByRole('button'));
expect(clicked).toBe(true);
});

it('does not call onclick when disabled', async () => {
let clicked = false;
const { getByRole } = render(Button, {
props: {
disabled: true,
onclick: () => { clicked = true; },
},
});

await fireEvent.click(getByRole('button'));
expect(clicked).toBe(false);
});

it('does not call onclick when loading', async () => {
let clicked = false;
const { getByRole } = render(Button, {
props: {
loading: true,
onclick: () => { clicked = true; },
},
});

await fireEvent.click(getByRole('button'));
expect(clicked).toBe(false);
});

it('applies variant class', () => {
const { getByRole } = render(Button, {
props: { variant: 'secondary' },
});

expect(getByRole('button').classList.contains('button--secondary')).toBe(true);
});

it('applies size class', () => {
const { getByRole } = render(Button, {
props: { size: 'large' },
});

expect(getByRole('button').classList.contains('button--large')).toBe(true);
});
});